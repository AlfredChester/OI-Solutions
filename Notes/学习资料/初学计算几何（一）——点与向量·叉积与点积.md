# 初学计算几何（一）——点与向量·叉积与点积

### 前言

**计算几何**应该是一个比较复杂的东西吧，它的应用十分广泛。为此，我花了很长的时间来学习计算几何。

### 点与向量

-   **点**

**点**应该还算比较简单吧！对于平面上的一个坐标为$(x,y)$的点，我们可以用$P(x,y)$来表示它。

-   **向量**

**向量**表示的是一个有大小和方向的量，在平面坐标系下它与点一样也用两个数来表示。这两个数的实际含义是**将这个向量的起点移至原点后终点的坐标**。通常，我们用$\vec v$来表示一个向量，用$|\vec v|$来表示向量$\vec v$的长度。

-   **点与向量的基本定义与运算**

虽然点与向量十分相像，但是它们在概念上还是有许多不同的。

下面是它们的基本定义与运算。

```cpp
struct Point//一个结构体用来存储一个点
{
	double x,y;//分别存储点的两个坐标
	Point(double nx=0,double ny=0):x(nx),y(ny){}//构造函数
};
typedef Point Vector;//向量在代码中其实与点差不多，因此可以直接typedef一下
inline Vector operator + (Vector A,Vector B) {return Vector(A.x+B.x,A.y+B.y);}//向量+向量=向量
inline Vector operator - (Point  A,Point  B) {return Vector(A.x-B.x,A.y-B.y);}//点-点=向量
inline Vector operator * (Vector A,double x) {return Vector(A.x*x,A.y*x);}//向量*一个数=向量
inline Vector operator / (Vector A,double x) {return Vector(A.x/x,A.y/x);}//向量/一个数=向量
```

### 点积

下面，先来介绍一下向量的**点积**。

-   **点积的计算公式及其扩展**

$$
\vec v(X_1,Y_1)·\vec u(X_2,Y_2)=X_1X_2+Y_1Y_2 
$$

对于两个向量$\vec v$和$\vec u$，如果它们的夹角为$\theta$，则它们的点积就等同于$|\vec v||\vec u|cos \theta$。

既然这样，我们就可以推导出以下公式：

**向量的长度**：$\sqrt {\vec v·\vec v}$（因为对于两个相同的向量，$cos\theta=0$，因此$\vec v·\vec v=|\vec v||\vec v|=|\vec v|^2$）

**向量的夹角**：$acos(\vec v·\vec u/|\vec v|/|\vec u|)$（因为$\vec v·\vec u/|\vec v|/|\vec u|=cos\theta$，所以$\theta=acos(\vec v·\vec u/|\vec v|/|\vec u|)$）

以下是代码实现：

```cpp
inline double Dot(Vector A,Vector B) {return A.x*B.x+A.y*B.y;}//点积
inline double Len(Vector A) {return sqrt(Dot(A,A));}//向量的长度等于sqrt(x^2+y^2)
inline double Ang(Vector A,Vector B) {return acos(Dot(A,B)/Len(A)/Len(B));}//向量的夹角等于acos(A·B/|A|/|B|)
```

-   **点积的正负**

该如何判断两个向量的点积的正负呢？

点积的正负是由两个向量的夹角$\theta$所决定的。

$$
\begin{cases}当\theta<90^。时，点积为正\\当\theta>90^。时，点积为负\\当\theta=90^。，即两个向量垂直时，点积等于0\end{cases} 
$$

-   **其他**

点积还有一个很重要的性质，就是点积满足**交换律**。

### 叉积

**叉积**与**点积**是十分类似的。

-   **叉积的计算公式及其扩展**

$$
\vec v(X_1,Y_1)×\vec u(X_2,Y_2)=X_1Y_2-Y_1X_2 
$$

叉积有一个十分神奇的性质，就是$\vec v×\vec u$恰好等于这两个向量组成的三角形的**有向面积**的$2$倍。

这样，我们就能轻松求出两个向量组成的三角形的面积了：

**两个向量组成的三角形的面积**：$\frac {\vec v×\vec u} 2$

以下是代码实现：

```cpp
inline double Cro(Vector A,Vector B) {return A.x*B.y-A.y*B.x;}//叉积
inline double Area(Vector A,Vector B) {return Cro(A,B)/2;}//求两个向量组成三角形的有向面积
```

-   **叉积的正负**

叉积的正负是由两个向量的位置关系决定的。

$$
\begin{cases}当\vec u在\vec v左边时，\vec v×\vec u为正\\当\vec u在\vec v右边时，\vec v×\vec u为负\\如果\vec u与\vec v方向相同，则\vec v×\vec u为0\end{cases} 
$$

-   **其他**

叉积是不满足交换律的，$\vec v×\vec u=-\vec u×\vec v$。

### 后记：其他常见运算

点与向量还有一些比较基本的运算，下面就直接贴代码了。

-   **旋转**

```cpp
inline Vector Rotate(Vector A,double rad) {return Vector(A.x*cos(rad)-A.y*sin(rad),A.x*sin(rad)+A.y*cos(rad));}//将向量A旋转rad度
```

-   **求法线**

```cpp
inline Vector Normal(Vector A) {double len=Len(A);return Vector(-A.y/len,A.x/len);}//求向量A的单位法线
```